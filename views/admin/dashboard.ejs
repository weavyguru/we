<div class="container mx-auto px-6 py-12">
  <div class="mb-8">
    <h1 class="text-4xl font-bold text-gray-900 mb-2">Survey Questions</h1>
    <p class="text-gray-600">Manage survey questions - add, edit, reorder, or delete</p>
  </div>

  <!-- Add New Question Button -->
  <div class="mb-6">
    <button id="addQuestionBtn" class="gradient-bg text-white px-6 py-3 rounded hover:opacity-90 transition">
      <i class="fas fa-plus mr-2"></i> Add New Question
    </button>
  </div>

  <!-- Questions List -->
  <div id="questionsList" class="space-y-4">
    <% if (questions.length === 0) { %>
      <div class="bg-gray-50 border border-gray-200 rounded-lg p-8 text-center text-gray-500">
        <i class="fas fa-question-circle text-4xl mb-3"></i>
        <p>No questions yet. Click "Add New Question" to get started.</p>
      </div>
    <% } else { %>
      <% questions.forEach(question => { %>
        <div class="question-item bg-white border border-gray-200 rounded-lg p-6" data-id="<%= question._id %>" data-order="<%= question.order %>">
          <div class="flex items-start gap-4">
            <!-- Drag Handle -->
            <div class="drag-handle cursor-move text-gray-400 hover:text-gray-600 mt-1">
              <i class="fas fa-grip-vertical text-xl"></i>
            </div>

            <!-- Question Content -->
            <div class="flex-1">
              <div class="flex items-start justify-between mb-2">
                <div class="flex-1">
                  <h3 class="text-lg font-semibold text-gray-900 mb-1"><%= question.questionText %></h3>
                  <div class="flex gap-3 text-sm text-gray-500">
                    <span class="capitalize"><i class="fas fa-<%= question.type === 'splash' ? 'info-circle' : question.type === 'yes_no' ? 'check-circle' : question.type === 'text' ? 'font' : question.type === 'email' ? 'envelope' : question.type === 'url' ? 'link' : 'align-left' %>"></i> <%= question.type === 'splash' ? 'Splash Screen' : question.type === 'yes_no' ? 'Yes/No' : question.type === 'text' ? 'Text' : question.type === 'email' ? 'Email' : question.type === 'url' ? 'URL' : 'Text Area' %></span>
                    <span><%= question.type === 'splash' ? 'Info Only' : question.required ? 'Required' : 'Optional' %></span>
                  </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-2">
                  <button class="edit-btn text-blue-600 hover:text-blue-800 px-3 py-1" data-id="<%= question._id %>">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="delete-btn text-red-600 hover:text-red-800 px-3 py-1" data-id="<%= question._id %>">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    <% } %>
  </div>
</div>

<!-- Add/Edit Question Modal -->
<sl-dialog id="questionModal" label="Add Question">
  <form id="questionForm">
    <input type="hidden" id="questionId" name="questionId">

    <div class="mb-4">
      <label class="block text-sm font-semibold text-gray-700 mb-2">Question Text</label>
      <sl-input id="questionText" name="questionText" placeholder="Enter your question" required></sl-input>
    </div>

    <div class="mb-4">
      <label class="block text-sm font-semibold text-gray-700 mb-2">Body Text (Optional)</label>
      <sl-textarea id="questionBody" name="body" placeholder="Add additional context or explanation..." rows="3"></sl-textarea>
    </div>

    <div class="mb-4">
      <label class="block text-sm font-semibold text-gray-700 mb-2">Question Type</label>
      <sl-select id="questionType" name="type" placeholder="Select question type" required>
        <sl-option value="splash">Splash Screen (Info only)</sl-option>
        <sl-option value="yes_no">Yes/No</sl-option>
        <sl-option value="text">Text (Single Line)</sl-option>
        <sl-option value="email">Email</sl-option>
        <sl-option value="url">URL</sl-option>
        <sl-option value="textarea">Text Area (Multi-line)</sl-option>
      </sl-select>
    </div>

    <div class="mb-4">
      <sl-checkbox id="questionRequired" name="required" checked>Required</sl-checkbox>
    </div>

    <div class="flex justify-end gap-3 mt-6">
      <sl-button variant="default" id="cancelBtn">Cancel</sl-button>
      <sl-button variant="primary" type="submit" id="saveBtn">Save Question</sl-button>
    </div>
  </form>
</sl-dialog>

<script src="/js/admin.js"></script>
